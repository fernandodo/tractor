视频: 【B站讲的最好的C++面试八股文（2025最新版）深入讲解最新一线互联网C++相关八股文，冲大厂必看系列】 https://www.bilibili.com/video/BV1z8WbzZESA/?p=8&share_source=copy_web

1
0:0:0,72 --> 0:0:1,8
Hello

2
0:0:1,8 --> 0:0:1,32
大家好

3
0:0:1,32 --> 0:0:2,8
我是Mark

4
0:0:2,8 --> 0:0:3,82
今天跟大家分享一道面试题

5
0:0:3,82 --> 0:0:9,43
虾皮西加一面说一下constant和constant inspiration

6
0:0:9,79 --> 0:0:12,16
在这里先给大家介绍一下参考答案

7
0:0:12,16 --> 0:0:15,46
该参考答案呢围绕四个方面进行展开阐述

8
0:0:15,46 --> 0:0:17,88
第一个方面先介绍一下constant和CONSOL

9
0:0:17,88 --> 0:0:19,4
EXPATION是什么

10
0:0:19,4 --> 0:0:20,9
以及它们之间的关系

11
0:0:20,9 --> 0:0:25,76
接着我们再从三个方面来阐述它们之间的差异

12
0:0:25,76 --> 0:0:27,82
我们先来看一下它们是什么

13
0:0:27,82 --> 0:0:29,47
以及它们之间的关系

14
0:0:29,47 --> 0:0:33,73
constant和constant exeration是西压当中两个关键字

15
0:0:33,73 --> 0:0:36,77
constant inspiration是constant的严格超级

16
0:0:36,77 --> 0:0:42,51
也就是constant inspiration包含constant严格的限定了

17
0:0:42,51 --> 0:0:45,45
这里严格限定了是指我们的CONSTIRATION

18
0:0:45,45 --> 0:0:48,15
它限定了编译器常量的语义

19
0:0:48,15 --> 0:0:50,5
因为在C语言当中

20
0:0:50,5 --> 0:0:52,17
constant它只有只读语义

21
0:0:52,17 --> 0:0:56,5
西加当中又给他带来了一个常量的语义

22
0:0:56,5 --> 0:0:58,39
那么我们concentration呢

23
0:0:58,39 --> 0:1:1,46
它主要是限定这个常量的语义

24
0:1:1,46 --> 0:1:3,42
是编译期常量的语义

25
0:1:3,42 --> 0:1:6,5
编译期常量呢是指编译期的进行计算

26
0:1:6,5 --> 0:1:8,87
确定的这样的一个常量

27
0:1:8,87 --> 0:1:11,67
它能够帮助编译器生成更高效的代码

28
0:1:11,67 --> 0:1:15,289
同时呢避免了constant的双重语义歧义

29
0:1:15,289 --> 0:1:17,729
这种语义歧义呢主要是指constant

30
0:1:17,729 --> 0:1:19,8
它包含两个

31
0:1:19,8 --> 0:1:21,92
一个呢是C语言当中的只读语义

32
0:1:21,92 --> 0:1:25,59
另外一个呢就是C加当中引入的常量语义

33
0:1:26,3 --> 0:1:30,13
然后我们再从三个方面来阐述它们之间的差异

34
0:1:30,13 --> 0:1:32,81
第一个在修饰变量的时候

35
0:1:32,81 --> 0:1:35,59
constant保证运行时只读

36
0:1:35,59 --> 0:1:39,33
那么我们这里的只读呢是运行时的只读

37
0:1:39,73 --> 0:1:42,43
他不要求编译期可计算

38
0:1:42,43 --> 0:1:45,21
只读呢是不能够修改的意思

39
0:1:45,21 --> 0:1:49,45
CONCERISTRATION是要求编译器可进行计算值

40
0:1:49,45 --> 0:1:51,49
必须在编译阶段进行确定

41
0:1:51,49 --> 0:1:53,9
否则会编译错误

42
0:1:54,34 --> 0:1:56,76
第二个方面呢是constant的变量

43
0:1:56,76 --> 0:1:59,18
在运行时需要出额

44
0:1:59,18 --> 0:2:1,21
可以在运行时初始化

45
0:2:1,21 --> 0:2:5,36
编译器呢仅仅检查是否会被修改

46
0:2:5,52 --> 0:2:7,6
那么在这里呢主要体现在

47
0:2:7,6 --> 0:2:11,14
比如说我们用一个constant的变量去获取

48
0:2:11,14 --> 0:2:14,7
某一个函数的调用

49
0:2:14,7 --> 0:2:16,59
那么这个函数的调用呢是在运行时调用的

50
0:2:16,59 --> 0:2:19,17
那么所以呢他可以在运行时去初始化

51
0:2:19,17 --> 0:2:20,67
我们的这个变量

52
0:2:20,67 --> 0:2:24,57
constant inspiration变量呢必须在编译期完成初始化

53
0:2:24,57 --> 0:2:28,9
这个呢是更加强调这个常量的语义

54
0:2:28,41 --> 0:2:30,51
接着在修饰函数的时候

55
0:2:30,51 --> 0:2:33,51
console呢只能够修饰非静态成员函数

56
0:2:33,51 --> 0:2:35,7
那实际上隐藏额

57
0:2:35,7 --> 0:2:39,16
隐藏要修饰的是隐藏的this指针啊

58
0:2:39,16 --> 0:2:41,42
比如说大家可以看到这里的一个这样的案例

59
0:2:41,42 --> 0:2:44,4
Python它有两个成员变量

60
0:2:44,4 --> 0:2:45,56
name和age

61
0:2:45,56 --> 0:2:48,8
然后呢大家可以看到get name的时候

62
0:2:48,8 --> 0:2:49,84
它是constant进行修饰的

63
0:2:49,84 --> 0:2:53,1
通常constant呢就是在我们的成员函数的后面

64
0:2:53,1 --> 0:2:55,24
加上这样的一个修饰关键词

65
0:2:55,27 --> 0:2:59,89
那么constant它本质上修饰的是this指针

66
0:2:59,89 --> 0:3:4,9
也就是呢我们不能够去改变它的成员变量

67
0:3:6,52 --> 0:3:10,18
接着我们再来看一下constant expression修饰的函数呢

68
0:3:10,18 --> 0:3:12,15
它要求函数呃

69
0:3:12,15 --> 0:3:13,57
这里有两种情况

70
0:3:13,57 --> 0:3:17,23
第一个呢是如果传入的是编译器参数的时候

71
0:3:17,23 --> 0:3:21,5
那么我们必须得返回编译器的值

72
0:3:21,37 --> 0:3:24,45
那如果是传入运行时的参数的时候呢

73
0:3:24,45 --> 0:3:27,39
那这一个iteration所修饰的函数呢

74
0:3:27,39 --> 0:3:29,77
它将作为普通函数运行

75
0:3:29,77 --> 0:3:32,19
这个呢是它的两种情况

76
0:3:32,78 --> 0:3:36,2
接着呢我们可以从使用场景来进行阐述

77
0:3:36,2 --> 0:3:39,109
在需要编译期常量的场景

78
0:3:39,109 --> 0:3:40,769
比如说我们的模板参数

79
0:3:40,769 --> 0:3:41,709
编译器计算

80
0:3:41,709 --> 0:3:45,29
那本质上呢就是它需要编译器进行计算的

81
0:3:45,29 --> 0:3:46,19
这样的一个常量

82
0:3:46,19 --> 0:3:48,659
我们用CONSUPERATION去进行使用

83
0:3:49,819 --> 0:3:53,78
如果仅需保障只读的场景

84
0:3:53,78 --> 0:3:55,86
比如说我们的函数传参的时候

85
0:3:55,86 --> 0:3:57,38
我们用constant呃

86
0:3:57,38 --> 0:3:59,16
引用的这种方式

87
0:3:59,16 --> 0:4:2,8
那么呢这样子呢就是防修改

88
0:4:2,8 --> 0:4:4,72
那只是一个只读的场景

89
0:4:4,72 --> 0:4:7,84
这种场景下呢我们用constant啊

90
0:4:7,84 --> 0:4:11,68
另外就是能够使用constant expression的时候

91
0:4:11,68 --> 0:4:14,16
尽可能的使用constant expression

92
0:4:14,16 --> 0:4:15,96
就是既可以使用constant

93
0:4:15,96 --> 0:4:17,8
又可以使用CONCERISTRATION的时候

94
0:4:17,8 --> 0:4:19,4
我们要用constant exeration

95
0:4:19,4 --> 0:4:22,51
因为呢他的语义更加的严格一些

96
0:4:22,79 --> 0:4:24,57
然后我们再来了解一下

97
0:4:24,57 --> 0:4:27,87
他们上面所提到的一些关键细节

98
0:4:28,27 --> 0:4:29,31
我们刚刚说了

99
0:4:29,31 --> 0:4:31,39
他们是严格的超级严格的

100
0:4:31,39 --> 0:4:34,26
超级呢是指所有的constant diration变量

101
0:4:34,26 --> 0:4:35,62
它都是constant

102
0:4:35,62 --> 0:4:38,4
但是constant变量呢不一定是CONSODISTRATION

103
0:4:38,4 --> 0:4:39,6
因为constant exeration呢

104
0:4:39,6 --> 0:4:42,4
它在变量的要在编译期进行计算

105
0:4:42,4 --> 0:4:46,38
而我们的constant呢它可以在运行时进行初始化

106
0:4:46,38 --> 0:4:50,66
额我们的CONSTATION呢它是编译器就的初始化

107
0:4:51,349 --> 0:4:55,289
大家可以看到这里呢是通过一个constant int x

108
0:4:55,289 --> 0:4:59,429
那显然呢这个X是运行时传值的进行初始化的

109
0:4:59,429 --> 0:5:1,749
那么如果我们的这个编译器

110
0:5:1,749 --> 0:5:4,78
我们的这个模板模板参数

111
0:5:4,78 --> 0:5:6,92
那这里呢必须得是常量

112
0:5:6,92 --> 0:5:8,58
所以呢是不行的

113
0:5:8,58 --> 0:5:11,3
因为这里呢只是一个只读语义

114
0:5:11,3 --> 0:5:13,34
它会编译后报错

115
0:5:13,34 --> 0:5:18,6
另外呢就是大家可以看到下面我们的const int y

116
0:5:18,6 --> 0:5:20,27
这里呢它是编译器常量

117
0:5:20,27 --> 0:5:22,97
但是呢我们可以用constant caster

118
0:5:22,97 --> 0:5:26,87
把它这个变量呢呃去除它的引用呃

119
0:5:26,87 --> 0:5:29,4
去除constant属性啊

120
0:5:29,4 --> 0:5:30,46
并且呢去进行修改它

121
0:5:30,46 --> 0:5:32,93
这种呢是一种未定义的行为

122
0:5:33,37 --> 0:5:36,87
第二个就是我们需要理解这个constant双重语义

123
0:5:36,87 --> 0:5:37,97
在C语言当中

124
0:5:37,97 --> 0:5:40,18
constant呢它只有一个只读语义

125
0:5:40,18 --> 0:5:43,679
而西西加在C的基础上增加了这种常量语义

126
0:5:43,679 --> 0:5:45,539
好我们C加11之后

127
0:5:45,539 --> 0:5:48,39
我们从如果是这种常量语义的话

128
0:5:48,39 --> 0:5:51,51
我们尽可能的使用CONSUPERATION啊

129
0:5:51,51 --> 0:5:53,39
接着来了解一下concentration

130
0:5:53,39 --> 0:5:56,39
他的眼镜C加11的时候呢

131
0:5:56,39 --> 0:5:59,53
它只提供了一个比较简单的使用方式

132
0:5:59,53 --> 0:6:1,47
就是单RETUR这种方式

133
0:6:1,47 --> 0:6:3,19
而且呢里面不能够有循环

134
0:6:3,19 --> 0:6:4,39
不能够这种判

135
0:6:4,39 --> 0:6:6,69
而不能有复杂的这种运算

136
0:6:6,69 --> 0:6:9,57
那么在西压十四十七二十呢

137
0:6:9,57 --> 0:6:10,79
不断的去增加

138
0:6:10,79 --> 0:6:13,49
放宽了他的一个限定

139
0:6:14,35 --> 0:6:16,27
第四个就是constant

140
0:6:16,27 --> 0:6:17,83
刚刚有跟大家说

141
0:6:17,83 --> 0:6:19,91
他修饰非静态成员函数呢

142
0:6:19,91 --> 0:6:22,78
实际上修饰的是隐藏的this指针

143
0:6:23,6 --> 0:6:26,78
关于constant和is constant inspiration

144
0:6:26,78 --> 0:6:27,9
就跟大家介绍到这

145
0:6:27,9 --> 0:6:29,78
如果大家需要本视频资料的朋友

146
0:6:29,78 --> 0:6:31,6
可以一键三连加关注

147
0:6:31,6 --> 0:6:32,8
谢谢大家

